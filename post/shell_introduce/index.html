<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shell脚本基础 | 小鱼儿</title>
<link rel="shortcut icon" href="https://LittleFish0820.github.io/favicon.ico?v=1661738962773">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://LittleFish0820.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Shell脚本基础 | 小鱼儿 - Atom Feed" href="https://LittleFish0820.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="本文介绍Shell脚本语法基础、常用工具以及正则表达式基础。


Shell概述

HelloWorld


变量

系统预定义变量
自定义变量
特殊变量


运算符
条件判断
流程控制

if
case
for
while


read读..." />
    <meta name="keywords" content="Shell" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://LittleFish0820.github.io">
  <img class="avatar" src="https://LittleFish0820.github.io/images/avatar.png?v=1661738962773" alt="">
  </a>
  <h1 class="site-title">
    小鱼儿
  </h1>
  <p class="site-description">
    鱼戏莲叶间
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Shell脚本基础
            </h2>
            <div class="post-info">
              <span>
                2022-08-17
              </span>
              <span>
                16 min read
              </span>
              
                <a href="https://LittleFish0820.github.io/tag/shell/" class="post-tag">
                  # Shell
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <p>本文介绍Shell脚本语法基础、常用工具以及正则表达式基础。</p>
<!-- more -->
<p><ul class="markdownIt-TOC">
<li><a href="#shell%E6%A6%82%E8%BF%B0">Shell概述</a>
<ul>
<li><a href="#helloworld">HelloWorld</a></li>
</ul>
</li>
<li><a href="#%E5%8F%98%E9%87%8F">变量</a>
<ul>
<li><a href="#%E7%B3%BB%E7%BB%9F%E9%A2%84%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F">系统预定义变量</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F">自定义变量</a></li>
<li><a href="#%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F">特殊变量</a></li>
</ul>
</li>
<li><a href="#%E8%BF%90%E7%AE%97%E7%AC%A6">运算符</a></li>
<li><a href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD">条件判断</a></li>
<li><a href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6">流程控制</a>
<ul>
<li><a href="#if">if</a></li>
<li><a href="#case">case</a></li>
<li><a href="#for">for</a></li>
<li><a href="#while">while</a></li>
</ul>
</li>
<li><a href="#read%E8%AF%BB%E5%8F%96%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%85%A5">read读取控制台输入</a></li>
<li><a href="#%E5%87%BD%E6%95%B0">函数</a>
<ul>
<li><a href="#%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0">系统函数</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0">自定义函数</a></li>
</ul>
</li>
<li><a href="#shell%E5%B7%A5%E5%85%B7">Shell工具</a>
<ul>
<li><a href="#cut">cut</a></li>
<li><a href="#sed">sed</a></li>
<li><a href="#awk">awk</a></li>
<li><a href="#sort">sort</a></li>
</ul>
</li>
<li><a href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%85%A5%E9%97%A8">正则表达式入门</a>
<ul>
<li><a href="#%E5%B8%B8%E8%A7%84%E5%8C%B9%E9%85%8D">常规匹配</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6">常用特殊字符</a></li>
</ul>
</li>
</ul>
</p>
<h1 id="shell概述">Shell概述</h1>
<p>Shell是一个<mark>命令行解释器</mark>，它接收应用程序/用户命令，然后调用操作系统内核。</p>
<figure data-type="image" tabindex="1"><img src="https://LittleFish0820.github.io/post-images/1661011357355.png" alt="Shell桥梁" loading="lazy"></figure>
<p><strong>1. Linux提供的解析器</strong></p>
<pre><code class="language-shell">[fish@hadoop101 ~]$ cat /etc/shells 
/bin/sh
/bin/bash
/sbin/nologin
/usr/bin/sh
/usr/bin/bash
/usr/sbin/nologin
</code></pre>
<p><strong>2. bash 和 sh的关系</strong></p>
<pre><code class="language-shell">[fish@hadoop101 ~]$ cd /bin
[fish@hadoop101 bin]$ ll | grep bash
-rwxr-xr-x. 1 root root    964544 4月  11 2018 bash
lrwxrwxrwx. 1 root root        10 8月  19 15:48 bashbug -&gt; bashbug-64
-rwxr-xr-x. 1 root root      6964 4月  11 2018 bashbug-64
lrwxrwxrwx. 1 root root         4 8月  19 15:48 sh -&gt; bash
</code></pre>
<p><strong>3. CentOS解析器是 bash</strong></p>
<pre><code class="language-shell">[fish@hadoop101 bin]$ echo $SHELL
/bin/bash
</code></pre>
<h2 id="helloworld">HelloWorld</h2>
<p>脚本文件名后缀为<code>.sh</code>，脚本开头为<code>#!/bin/bash</code></p>
<p>脚本实现功能：新建<code>.txt</code>文件并写入<code>Hello World!</code></p>
<pre><code class="language-shell">[fish@hadoop101 ~]$ mkdir data
[fish@hadoop101 ~]$ cd data
[fish@hadoop101 data]$ vim helloworld.sh
#!/bin/bash
cd /home/fish/data
touch helloworld.txt
echo &quot;Hello World!&quot; &gt;&gt; helloworld.txt

[fish@hadoop101 data]$ /bin/bash helloworld.sh 
[fish@hadoop101 data]$ cat helloworld.txt 
Hello World!
</code></pre>
<h1 id="变量">变量</h1>
<h2 id="系统预定义变量">系统预定义变量</h2>
<p><strong>1. 查看系统变量的值</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ echo $HOME $PWD $SHELL $USER/home/fish /home/fish/data /bin/bash fish
</code></pre>
<p><strong>2. 显示当前Shell中的所有变量</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ set | grep bash
BASH=/bin/bash
HISTFILE=/home/fish/.bash_history
SHELL=/bin/bash
</code></pre>
<h2 id="自定义变量">自定义变量</h2>
<p><strong>1. 定义变量、重新赋值</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ A=5
[fish@hadoop101 data]$ echo $A
5
[fish@hadoop101 data]$ A=6
[fish@hadoop101 data]$ echo $A
6
</code></pre>
<p><strong>2. 撤销变量</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ unset A
[fish@hadoop101 data]$ echo $A

</code></pre>
<p><strong>3. 声明静态变量，不能撤销</strong></p>
<p>大概需要重启才能消失</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ readonly B=2
[fish@hadoop101 data]$ echo $B
2
[fish@hadoop101 data]$ B=3
-bash: B: 只读变量
[fish@hadoop101 data]$ unset B
-bash: unset: B: 无法反设定: 只读 variable
</code></pre>
<p><strong>4. 把变量提升为全局环境变量</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim exportTest.sh
#!/bin/bash
echo $B

[fish@hadoop101 data]$ /bin/bash exportTest.sh 

[fish@hadoop101 data]$ echo $B
2
[fish@hadoop101 data]$ export B
[fish@hadoop101 data]$ /bin/bash exportTest.sh 
2
</code></pre>
<h2 id="特殊变量">特殊变量</h2>
<p><strong>1. $n</strong></p>
<p>n为数字，<code>$0</code>代表该脚本名称，<code>$1</code>~<code>$9</code>代表第1到第9个参数，两位数以上用<code>${10}</code></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim parameter.sh
#!/bin/bash
echo &quot;$0&quot;
echo &quot;$1 $2 $3 $4 $5 $6&quot;
echo &quot;$7 $8 $9 ${10}&quot;

[fish@hadoop101 data]$ /bin/bash parameter.sh to be or not to be that is a question
parameter.sh
to be or not to be
that is a question
</code></pre>
<p><strong>2. $#</strong></p>
<p>用于获取所有输入参数个数（脚本文件本身不算作参数），便于循环。</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim parameter.sh 
#!/bin/bash
echo &quot;$0&quot;
echo &quot;$1 $2 $3 $4 $5 $6&quot;
echo &quot;$7 $8 $9 ${10}&quot;
echo &quot;The number of input parameters is: $#&quot;

[fish@hadoop101 data]$ /bin/bash parameter.sh to be or not to be that is a question
parameter.sh
to be or not to be
that is a question
The number of input parameters is: 10
</code></pre>
<p><strong>3. $*、$@</strong></p>
<p>两者都代表命令行中所有的参数，前者是一个整体，后者可以区别对待每个参数。（具体区别请看流程控制部分）</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim parameter.sh 
#!/bin/bash
echo &quot;$*&quot;
echo &quot;$@&quot;

[fish@hadoop101 data]$ /bin/bash parameter.sh to be or not to be, that is a question
to be or not to be, that is a question
to be or not to be, that is a question
</code></pre>
<p><strong>4. $?</strong></p>
<p>表示最后一次执行的命令的返回状态，0表示上一次命令正确执行。</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ unset B
-bash: unset: B: 无法反设定: 只读 variable
[fish@hadoop101 data]$ echo $?
1
[fish@hadoop101 data]$ echo $B
2
[fish@hadoop101 data]$ echo $?
0
</code></pre>
<h1 id="运算符">运算符</h1>
<p><strong>1. $((运算式)) 和 $[运算式]</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ echo $((1+2))
3
[fish@hadoop101 data]$ echo $[2+3]
5
</code></pre>
<p><strong>2. expr</strong></p>
<p>要留意空格，且一个<code>expr</code>只管一个运算符，乘号用<code>\*</code>，一次结果还需要**``**括起来。不推荐用这种方式。</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ expr 1 + 2
3
[fish@hadoop101 data]$ expr `expr 1 + 2` \* 3
9
</code></pre>
<h1 id="条件判断">条件判断</h1>
<p><strong>1. test condition</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ test 1 -lt 2
[fish@hadoop101 data]$ echo $?
0
[fish@hadoop101 data]$ test 1 -gt 2
[fish@hadoop101 data]$ echo $?
1
</code></pre>
<p><strong>2. [ condition ]</strong></p>
<ul>
<li><code>&amp;&amp;</code>表示前一条命令执行成功时，才执行后一条命令</li>
<li><code>||</code>表示上一条命令执行失败后，才执行下一条命令</li>
</ul>
<pre><code class="language-shell">[fish@hadoop101 data]$ [ -e ~/data/helloworld.txt ] &amp;&amp; echo OK
OK
[fish@hadoop101 data]$ echo $?
0

[fish@hadoop101 data]$ [ -e ~/data/helloworld.txt ] &amp;&amp; [ ] || echo not OK
not OK
[fish@hadoop101 data]$ echo $?
0
</code></pre>
<h1 id="流程控制">流程控制</h1>
<h2 id="if">if</h2>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim ifTest.sh
#!/bin/bash
if [ $1 -eq 0 ] 
then
	echo &quot;I am a girl.&quot;	
elif [ $1 -eq 1 ]
then
	echo &quot;I am a boy.&quot;
fi

if [ $1 -ge 2 ];then
	echo &quot;That is a question.&quot;
fi

[fish@hadoop101 data]$ /bin/bash ifTest.sh 0
I am a girl.
[fish@hadoop101 data]$ /bin/bash ifTest.sh 1
I am a boy.
[fish@hadoop101 data]$ /bin/bash ifTest.sh 2
That is a question.
</code></pre>
<h2 id="case">case</h2>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim caseTest.sh
#!/bin/bash
case $1 in
&quot;0&quot;)
	echo &quot;Female&quot;
;;
&quot;1&quot;)
	echo &quot;Male&quot;
;;
*)
	echo &quot;null&quot;
;;
esac	

[fish@hadoop101 data]$ chmod 777 caseTest.sh 
[fish@hadoop101 data]$ ./caseTest.sh 0
Female
[fish@hadoop101 data]$ ./caseTest.sh 1
Male
[fish@hadoop101 data]$ ./caseTest.sh 2
null
</code></pre>
<h2 id="for">for</h2>
<p><strong>1. 类似下标遍历for</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim forTest.sh
#!/bin/bash
Sum=0
for ((i=1;i&lt;=100;i++))
do
	Sum=$[$Sum+$i]
done

echo $Sum

[fish@hadoop101 data]$ bash forTest.sh 
5050
</code></pre>
<p><strong>2. 类似增强for</strong></p>
<p>可以看出<code>$@</code>和<code>$*</code>区别</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim forTest.sh
#!/bin/bash
for word in &quot;$*&quot;
do
	echo &quot;I was $word&quot;
done

for word in &quot;$@&quot;
do 
	echo &quot;I am $word.&quot;
done

[fish@hadoop101 data]$ bash forTest.sh study eat sleep
I was study eat sleep
I am study.
I am eat.
I am sleep.
</code></pre>
<h2 id="while">while</h2>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim whileTest.sh
#!/bin/bash
sum=0
i=1
while [ $i -le 100 ]
do
	sum=$[$sum+$i]
	i=$[$i+1]
done
echo $sum

[fish@hadoop101 data]$ bash whileTest.sh 
5050
</code></pre>
<h1 id="read读取控制台输入">read读取控制台输入</h1>
<ul>
<li>(prompt) <code>-p</code> 提示符</li>
<li>(time) <code>-t</code> 等待的时间(s)</li>
</ul>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim readTest.sh
#!/bin/bash
read -p &quot;Name: &quot; -t 7 name
echo &quot;My name is $name.&quot;

[fish@hadoop101 data]$ bash readTest.sh 
Name: fish
My name is fish.
</code></pre>
<h1 id="函数">函数</h1>
<h2 id="系统函数">系统函数</h2>
<p><strong>1. basename(掐头)</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ basename $PWD/helloworld.txt
helloworld.txt
[fish@hadoop101 data]$ basename $PWD/helloworld.txt .txt
helloworld
</code></pre>
<p><strong>2. dirname(去尾)</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ dirname $PWD/helloworld.txt 
/home/fish/data
</code></pre>
<h2 id="自定义函数">自定义函数</h2>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim twoSum.sh
#!/bin/bash
function twoSum
{
	echo &quot;$1 + $2 = $[$1+$2]&quot;
}

read -p &quot;first number: &quot; -t 10 n1
read -p &quot;second number: &quot; -t 10 n2

twoSum $n1 $n2

[fish@hadoop101 data]$ bash twoSum.sh 
first number: 4
second number: 6
4 + 6 = 10
</code></pre>
<h1 id="shell工具">Shell工具</h1>
<h2 id="cut">cut</h2>
<ul>
<li><code>-f</code>列号，从1开始</li>
<li><code>-d</code>指定分隔符</li>
</ul>
<p><strong>1. 切割指定列</strong></p>
<pre><code class="language-sh">[fish@hadoop101 data]$ vim cut.txt
to be or not to be
that is a question
dong guan
shen zhen
wo lai le 
my name is fish

[fish@hadoop101 data]$ cut cut.txt -f 1 -d &quot; &quot;
to
that
dong
shen
wo
my
[fish@hadoop101 data]$ cut cut.txt -f 2,3 -d &quot; &quot;
be or
is a
guan
zhen
lai le
name is
</code></pre>
<p><strong>2. 切割指定单词</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ cat cut.txt | grep that
that is a question
[fish@hadoop101 data]$ cat cut.txt | grep that | cut -d &quot; &quot; -f 1
that
</code></pre>
<p><strong>3. 系统PATH变量</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ echo $PATH
/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/fish/.local/bin:/home/fish/bin
[fish@hadoop101 data]$ echo $PATH | cut -d &quot;:&quot; -f 2-
/usr/bin:/usr/local/sbin:/usr/sbin:/home/fish/.local/bin:/home/fish/bin
</code></pre>
<p><strong>4. 切割ifconfig，打印IP地址</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ ifconfig ens33
ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.10.142  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::6609:f543:593c:4102  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 00:0c:29:ee:79:fc  txqueuelen 1000  (Ethernet)
        RX packets 21178  bytes 1554497 (1.4 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9561  bytes 1155721 (1.1 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

[fish@hadoop101 data]$ ifconfig ens33 | grep &quot;inet &quot; | cut -d 't' -f 2 | cut -d ' ' -f 2
192.168.10.142
</code></pre>
<h2 id="sed">sed</h2>
<p>stream editor</p>
<ul>
<li><code>a</code> add</li>
<li><code>d</code> delete</li>
<li><code>s</code> search and replace</li>
</ul>
<p><strong>1. 在某一行中插入新行</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ vim sed.txt
Bei jing 
Shang hai
Dong guan
[fish@hadoop101 data]$ sed &quot;2a Shen zhen&quot; sed.txt 
Bei jing 
Shang hai
Shen zhen
Dong guan
[fish@hadoop101 data]$ cat sed.txt 
Bei jing 
Shang hai
Dong guan
</code></pre>
<p><strong>2. 删除含有某字符串的行</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ sed &quot;/hai/d&quot; sed.txt 
Bei jing 
Dong guan
</code></pre>
<p><strong>3. 辞旧迎新</strong></p>
<p><code>g = global</code>表示全部替换；没有<code>g</code>默认只替换第一个</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ sed &quot;s/Dong guan/Cheng du/g&quot; sed.txt 
Bei jing 
Shang hai
Cheng du
</code></pre>
<p><strong>4. 多次操作</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ sed -e &quot;2d&quot; -e &quot;s/Bei jing/China/g&quot; sed.txt 
China 
Dong guan
</code></pre>
<h2 id="awk">awk</h2>
<p>请移步学习正则表达式</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ cp /etc/passwd ./
</code></pre>
<ul>
<li>
<p><code>-F</code> 指定分隔符</p>
</li>
<li>
<p><code>-v</code> variable 赋值一个用户定义变量</p>
</li>
</ul>
<p><strong>1. 搜索以root关键字开头的所有行，并输出指定列</strong></p>
<p>输出一列</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ awk -F: '/^root/{print $7}' passwd 
/bin/bash
</code></pre>
<p>输出两列，并指定分隔符</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ awk -F: '/^root/{print $1&quot;, &quot; $7}' passwd 
root, /bin/bash
</code></pre>
<p><strong>2. 添油加醋</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ awk -F: 'BEGIN{print &quot;user, shell&quot;} {print $1&quot;, &quot;$7} END{print &quot;fish, /bin/fish&quot;}' passwd
user, shell
root, /bin/bash
...
fish, /bin/bash
fish, /bin/fish
</code></pre>
<p><strong>3. 将 passwd 文件中的用户 id 增加数值 1 并输出</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ awk -v i=1 -F: '{print $3+i}' passwd 
1
2
3
...
75
90
1001
</code></pre>
<p><strong>4. 输出 passwd 文件名，统计每行的行号和列数</strong></p>
<ul>
<li><code>FILENAME</code> 文件名</li>
<li><code>NR</code> record</li>
<li><code>NF</code> field</li>
</ul>
<pre><code class="language-shell">[fish@hadoop101 data]$ awk -F: '{print &quot;filename:&quot; FILENAME &quot;, linenumber:&quot; NR &quot;, columns:&quot; NF}' passwd 
filename:passwd, linenumber:1, columns:7
filename:passwd, linenumber:2, columns:7
...
filename:passwd, linenumber:18, columns:7
filename:passwd, linenumber:19, columns:7
</code></pre>
<p><strong>5. 切割 IP</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ ifconfig ens33 | grep .*inet.*netmask | awk -F&quot; &quot; '{print $2}'
192.168.10.142
</code></pre>
<p>**6. 查询空行所在的行号 **</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ cat ifTest.sh 
#!/bin/bash

if [ $1 -eq 0 ] 
then
	echo &quot;I am a girl.&quot;	
elif [ $1 -eq 1 ]
then
	echo &quot;I am a boy.&quot;
fi

if [ $1 -ge 2 ];then
	echo &quot;That is a question.&quot;
fi

[fish@hadoop101 data]$ awk '/^$/{print NR}' ifTest.sh 
2
10
</code></pre>
<h2 id="sort">sort</h2>
<p>将文件进行排序，并将排序结果标准输出。</p>
<ul>
<li><code>-n</code> number 依照数值大小排序</li>
<li><code>-r</code> reverse</li>
<li><code>-t</code> 分隔符</li>
<li><code>-k</code> key</li>
</ul>
<pre><code class="language-sh">[fish@hadoop101 data]$ vim sort.txt 
Tom:40:2.4
Amy:30:4.5
John:50:3.2
Jim:20:5.0
Ann:35:2.8

[fish@hadoop101 data]$ sort -nr -t: -k2 sort.txt 
John:50:3.2
Tom:40:2.4
Ann:35:2.8
Amy:30:4.5
Jim:20:5.0
</code></pre>
<h1 id="正则表达式入门">正则表达式入门</h1>
<p>可在<code>grep</code>、<code>sed</code>、<code>awk</code>中练习</p>
<h2 id="常规匹配">常规匹配</h2>
<p>一串不包含特殊字符的正则表达式匹配它自己</p>
<pre><code class="language-SHELL">[fish@hadoop101 data]$ cat passwd | grep fish
fish:x:1000:1000::/home/fish:/bin/bash
</code></pre>
<h2 id="常用特殊字符">常用特殊字符</h2>
<p><strong>1. 匹配一行的开头 ^</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ cat passwd | grep ^root
root:x:0:0:root:/root:/bin/bash
</code></pre>
<p><strong>2. 匹配一行的结束$</strong></p>
<pre><code class="language-shell">[fish@hadoop101 data]$ cat passwd | grep bash$
root:x:0:0:root:/root:/bin/bash
fish:x:1000:1000::/home/fish:/bin/bash
</code></pre>
<blockquote>
<p><code>^$</code>匹配空行！</p>
</blockquote>
<p><strong>3. 匹配一个任意的字符 .</strong></p>
<p>一个<code>.</code>就是一个任意字符</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ cat passwd | grep r..t
root:x:0:0:root:/root:/bin/bash
operator:x:11:0:operator:/root:/sbin/nologin
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
</code></pre>
<p>**4. 匹配上一个字符0次或多次 ***</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ cat passwd | grep 10*
bin:x:1:1:bin:/bin:/sbin/nologin
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
operator:x:11:0:operator:/root:/sbin/nologin
games:x:12:100:games:/usr/games:/sbin/nologin
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin
dbus:x:81:81:System message bus:/:/sbin/nologin
fish:x:1000:1000::/home/fish:/bin/bash
</code></pre>
<p>观察可发现成功匹配1，10， 100， 1000。</p>
<p><strong>5. 匹配某个范围内的一个字符 [ ]</strong></p>
<ul>
<li><code>[6, 8]</code> 匹配6或者8</li>
<li><code>[a-z]</code> 匹配一个小写字母</li>
<li><code>[a-z]*</code> 小写字母可以出现0次或多次，所以是匹配任意小写字母字符串</li>
<li><code>[a-c,e-f]</code> 匹配<code>a,b,c;e,f</code></li>
</ul>
<pre><code class="language-shell">[fish@hadoop101 data]$ cat passwd | grep r[a-c]*t
operator:x:11:0:operator:/root:/sbin/nologin
sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
</code></pre>
<p><strong>6. 转义字符 \</strong></p>
<p>用于匹配特殊字符</p>
<pre><code class="language-shell">[fish@hadoop101 data]$ cat whileTest.sh 
#!/bin/bash
sum=0
i=1
while [ $i -le 100 ]
do
	sum=$[$sum+$i]
	i=$[$i+1]
done
echo $sum

[fish@hadoop101 data]$ cat whileTest.sh | grep \#
#!/bin/bash
[fish@hadoop101 data]$ cat whileTest.sh | grep \$i
while [ $i -le 100 ]
	sum=$[$sum+$i]
	i=$[$i+1]
</code></pre>
<blockquote>
<p>注意： <code>\$</code>并不能凑效，会匹配以<code>\</code>结尾</p>
</blockquote>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#shell%E6%A6%82%E8%BF%B0">Shell概述</a>
<ul>
<li><a href="#helloworld">HelloWorld</a></li>
</ul>
</li>
<li><a href="#%E5%8F%98%E9%87%8F">变量</a>
<ul>
<li><a href="#%E7%B3%BB%E7%BB%9F%E9%A2%84%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F">系统预定义变量</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F">自定义变量</a></li>
<li><a href="#%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F">特殊变量</a></li>
</ul>
</li>
<li><a href="#%E8%BF%90%E7%AE%97%E7%AC%A6">运算符</a></li>
<li><a href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD">条件判断</a></li>
<li><a href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6">流程控制</a>
<ul>
<li><a href="#if">if</a></li>
<li><a href="#case">case</a></li>
<li><a href="#for">for</a></li>
<li><a href="#while">while</a></li>
</ul>
</li>
<li><a href="#read%E8%AF%BB%E5%8F%96%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%85%A5">read读取控制台输入</a></li>
<li><a href="#%E5%87%BD%E6%95%B0">函数</a>
<ul>
<li><a href="#%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0">系统函数</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0">自定义函数</a></li>
</ul>
</li>
<li><a href="#shell%E5%B7%A5%E5%85%B7">Shell工具</a>
<ul>
<li><a href="#cut">cut</a></li>
<li><a href="#sed">sed</a></li>
<li><a href="#awk">awk</a></li>
<li><a href="#sort">sort</a></li>
</ul>
</li>
<li><a href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%85%A5%E9%97%A8">正则表达式入门</a>
<ul>
<li><a href="#%E5%B8%B8%E8%A7%84%E5%8C%B9%E9%85%8D">常规匹配</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6">常用特殊字符</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://LittleFish0820.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
